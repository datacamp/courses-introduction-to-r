---
title_meta: Capítulo 3
title: Matrizes
description: >-
  Neste capítulo, você aprenderá a trabalhar com matrizes no R. Ao final do
  capítulo, você será capaz de criar matrizes e entender como fazer cálculos
  básicos com elas. Você vai analisar os números de bilheteria dos filmes de
  Star Wars e aprender a usar matrizes no R. Que a força esteja com você!
---

## O que é uma matriz?

```yaml
type: NormalExercise
key: d61aeba84c
xp: 100
skills:
  - 1
```

No R, uma matriz é uma coleção de elementos do mesmo tipo de dados (numéricos, caracteres ou lógicos) organizados em um número fixo de linhas e colunas. Como trabalhamos apenas com linhas e colunas, uma matriz é chamada de bidimensional. 

Podemos construir uma matriz no R com a função `matrix()`. Observe o exemplo a seguir:

```
matrix(1:9, byrow = TRUE, nrow = 3)
```

Na função `matrix()`:

- O primeiro argumento é a coleção de elementos que o R deve organizar nas linhas e colunas da matriz. Aqui, usamos `1:9`, um atalho que representa `c(1, 2, 3, 4, 5, 6, 7, 8, 9)`.
- O argumento `byrow` indica que a matriz é preenchida pelas linhas. Se quisermos que a matriz seja preenchida pelas colunas, basta colocar `byrow = FALSE`. 
- O terceiro argumento, `nrow`, indica que a matriz deve ter três linhas.

`@instructions`
Construa uma matriz com 3 linhas contendo os números de 1 a 9, preenchida por linha.

`@hint`
Leia a tarefa com atenção, pois a resposta já foi dada!

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
```

`@solution`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
matrix(1:9, byrow = TRUE, nrow = 3)
```

`@sct`
```{r}
ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Você criou a matriz corretamente? Dê uma olhada na tarefa, a resposta já foi dada!")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Você criou a matriz corretamente? Dê uma olhada na tarefa, a resposta já foi dada!")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Você criou a matriz corretamente? Dê uma olhada na tarefa, a resposta já foi dada!")
	}

ex() %>% check_output_expr("matrix(1:9, byrow=TRUE, nrow=3)",missing_msg = "Parece haver um problema com a definição da matriz. Dê uma olhada na tarefa, a resposta já foi dada!")

success_msg("Ótimo! Continue para o próximo exercício.")
```

---

## Analisar matrizes, você deve

```yaml
type: NormalExercise
key: effc2fb945
xp: 100
skills:
  - 1
```

Agora é hora de colocar a mão na massa. Nos exercícios a seguir, você analisará os números de bilheteria da franquia Star Wars. Que a força esteja com você! 

No editor, três vetores foram definidos. Cada um representa os números de bilheteria dos três primeiros filmes de Star Wars. O primeiro elemento de cada vetor indica a receita de bilheteria dos EUA, e o segundo elemento refere-se à bilheteria fora dos EUA (fonte: Wikipedia).

Neste exercício, você vai combinar todos esses números em um único vetor. Em seguida, vai criar uma matriz a partir desse vetor.

`@instructions`
- Use `c(new_hope, empire_strikes, return_jedi)` para combinar os três vetores em um único vetor. Chame esse vetor de `box_office`.
- Construa uma matriz com 3 linhas, em que cada linha representa um filme. Use a função `matrix()` para fazer isso. O primeiro argumento é o vetor `box_office`, que contém todos os números de bilheteria. Em seguida, você terá que especificar `nrow = 3` e `byrow = TRUE`. Chame a matriz resultante de `star_wars_matrix`.

`@hint`
- `box_office <- c(new_hope, empire_strikes, return_jedi)` combina todos os números dos diferentes vetores em um único vetor com 6 elementos.
- `matrix(box_office, nrow = ..., byrow =  ...)` é um modelo de solução da segunda instrução.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- 

# Construct star_wars_matrix
star_wars_matrix <- 
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- c(new_hope, empire_strikes, return_jedi)

# Construct star_wars_matrix
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE) 
```

`@sct`
```{r}
msg <- "Não mude nada sobre as variáveis de bilheteria `new_hope`, `empire_strikes` e `return_jedi`!"

ex() %>% check_object("new_hope", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("empire_strikes", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("return_jedi", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("box_office") %>% check_equal(incorrect_msg = "Você combinou corretamente os valores de `new_hope`, `empire_strikes` e `return_jedi` no vetor `box_office`?")

ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Certifique-se de especificar corretamente os argumentos que você passa para `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Certifique-se de especificar corretamente os argumentos que você passa para `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Certifique-se de especificar corretamente os argumentos que você passa para `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	}

ex() %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = "Você atribuiu o resultado da chamada `matrix()` para `star_wars_matrix`?")

success_msg("A força está realmente com você! Continue para o próximo exercício.")
```

---

## Como dar nome a uma matriz

```yaml
type: NormalExercise
key: f734e8bf74
xp: 100
skills:
  - 1
```

Para ajudá-lo a lembrar o que está armazenado em `star_wars_matrix`, você deseja acrescentar os nomes dos filmes às linhas. Isso ajuda a interpretar os dados e também é útil para selecionar determinados elementos da matriz. 

Assim como no caso dos vetores, você pode adicionar os nomes das linhas e colunas de uma matriz

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

Já preparamos dois vetores para você: `region` e `titles`. Você vai precisar desses vetores para dar nome às colunas e linhas de `star_wars_matrix`, respectivamente.

`@instructions`
- Use `colnames()` para dar nome às colunas de `star_wars_matrix` com o vetor `region`.
- Use `rownames()` para dar nome às linhas de `star_wars_matrix` com o vetor `titles`.
- Imprima `star_wars_matrix` para ver o resultado de seu trabalho.

`@hint`
Você pode usar `colnames(star_wars_matrix) <- region` para dar nome às colunas de `star_wars_matrix`. Faça o mesmo para dar nome às linhas.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region


# Name the rows with titles


# Print out star_wars_matrix
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region
colnames(star_wars_matrix) <- region

# Name the rows with titles
rownames(star_wars_matrix) <- titles

# Print out star_wars_matrix
star_wars_matrix
```

`@sct`
```{r}
msg <- "Não mude nada sobre as variáveis de bilheteria `new_hope`, `empire_strikes` e `return_jedi`!"

ex()  %>% check_object("new_hope", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("empire_strikes", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("return_jedi", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

msg <- "Não mude o conteúdo de `star_wars_matrix`; apenas os nomes das linhas e colunas!" 

ex()  %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = msg)

msg <- "Não mude nada sobre os vetores `region` e `titles` que foram definidos para você."

ex()  %>% check_object("region", undefined_msg = msg)  %>%  check_equal(incorrect_msg = msg)
ex() %>% check_object("titles", undefined_msg = msg) %>% check_equal( incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix") %>% check_equal(eq_condition = "equal",incorrect_msg = "Você definiu corretamente os nomes das linhas e colunas de `star_wars_matrix`? Use `colnames(star_wars_matrix) <- region` para os nomes das colunas; faça algo semelhante para nomear as linhas.")

ex() %>% check_output_expr("star_wars_matrix", missing_msg = "Não se esqueça de imprimir `star_wars_matrix` depois de nomear as linhas e colunas.")

success_msg("Ótimo! Você está no caminho para se tornar um jedi do R! Continue para o próximo exercício.")
```

---

## Cálculo da bilheteria mundial

```yaml
type: NormalExercise
key: 3fd7499a12
xp: 100
skills:
  - 1
```

O fator mais importante para que um filme se torne uma lenda instantânea em Hollywood são os números de bilheteria mundial. 

Para calcular a receita total de bilheteria dos três filmes de Star Wars, é necessário obter a soma da coluna da receita nos EUA e da coluna da receita fora dos EUA. 

No R, a função `rowSums()` calcula com praticidade o total de cada linha de uma matriz. Essa função cria um novo vetor:

```
rowSums(my_matrix)
```

`@instructions`
Calcule os números de bilheteria mundial dos três filmes e coloque-os em um vetor chamado `worldwide_vector`.

`@hint`
`rowSums(star_wars_matrix)` calcula a soma de cada linha, ou seja, a bilheteria total de cada filme.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
                 "The Empire Strikes Back", 
                 "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)
```

`@sct`
```{r}
msg <- "Não altere nada sobre as variáveis predefinidas `box_office_all` e `star_wars_marix`!"

ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Chame `rowSums()` em `star_wars_matrix` e armazene o resultado em `worldwide_vector`.")

success_msg("Muito bem! Continue para o próximo exercício.")
```

---

## Como adicionar uma coluna para a bilheteria mundial

```yaml
type: NormalExercise
key: 86b87a8545
xp: 100
skills:
  - 1
```

No exercício anterior, você calculou o vetor que continha a receita de bilheteria mundial de cada um dos três filmes de Star Wars. No entanto, esse vetor ainda não faz parte de `star_wars_matrix`.

Você pode adicionar uma ou várias colunas a uma matriz com a função `cbind()`, que mescla matrizes e/ou vetores por coluna. Por exemplo: 

```
big_matrix <- cbind(matrix1, matrix2, vector1 ...)
```

`@instructions`
Adicione `worldwide_vector` como uma nova coluna a `star_wars_matrix` e atribua o resultado a `all_wars_matrix`. Use a função `cbind()`.

`@hint`
Neste exercício, você deve passar duas variáveis em `cbind()`: `star_wars_matrix` e `worldwide_vector`, nesta ordem. Atribua o resultado a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- cbind(star_wars_matrix, worldwide_vector)
```

`@sct`
```{r}
msg <- "Não altere nada sobre as variáveis predefinidas `box_office_all` e `star_wars_marix`!"
ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(, incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Armazene o resultado de `rowSums(star_wars_matrix)` em `worldwide_vector`.")

msg <- "Você usou corretamente `cbind()` para adicionar `worldwide_vector` a `star_wars_matrix`? Você deve passar `star_wars_matrix` e `world_wide_vector` para `cbind()`, nesta ordem. A matriz resultante, `all_wars_matrix`, deve consistir em três linhas e três colunas."
ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = msg)

success_msg("Bom trabalho! Depois de adicionar uma coluna a uma matriz, o próximo passo lógico é adicionar linhas. Aprenda como no próximo exercício.");
```

---

## Como adicionar uma linha

```yaml
type: NormalExercise
key: bcadb29139
xp: 100
skills:
  - 1
```

Assim como toda ação tem uma reação, todo `cbind()` tem um `rbind()` (temos que admitir: criar metáforas não é bem o nosso forte). 

Seu espaço de trabalho do R, onde ficam todas as variáveis que você definiu [(confira o que é um espaço de trabalho](http://www.statmethods.net/interface/workspace.html)), já foi inicializado e contém duas matrizes:

- `star_wars_matrix`, que usamos o tempo todo e contém dados sobre a trilogia original,
- `star_wars_matrix2`, com dados semelhantes sobre a trilogia prequel. 

Explore essas matrizes no console se quiser dar uma olhada melhor. Se quiser verificar o conteúdo do espaço de trabalho, digite `ls()` no console.

`@instructions`
Use `rbind()` para combinar `star_wars_matrix` e `star_wars_matrix2`, nesta ordem. Atribua a matriz resultante a `all_wars_matrix`.

`@hint`
Junte as duas matrizes da seguinte forma:
```
rbind(matrix1, matrix2)
```
Atribua o resultado a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# Construct matrix
box_office_all <- c(461, 314.4, 290.5, 247.9, 309.3, 165.8)
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi")
col_titles <- c("US","non-US")
star_wars_matrix <- matrix(box_office_all, nrow = 3, byrow = TRUE, dimnames = list(movie_names, col_titles))

# Construct matrix2
box_office_all2 <- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)
movie_names2 <- c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
star_wars_matrix2 <- matrix(box_office_all2, nrow=3, byrow = TRUE, dimnames = list(movie_names2, col_titles))

# remove all except all_wars_matrix
rm(box_office_all)
rm(movie_names)
rm(col_titles)
rm(box_office_all2)
rm(movie_names2)
```

`@sample_code`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2)
```

`@sct`
```{r}
msg = "Não sobrescreva as variáveis que foram definidas para você no ambiente de trabalho (`star_wars_matrix` e `star_wars_matrix2`)."
ex() %>% check_object("star_wars_matrix",  undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix2", undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = "Você usou o `rbind()` corretamente para criar `all_wars_matrix()`? `rbind()` deve receber dois argumentos: `star_wars_matrix` e `star_wars_matrix2`, nesta ordem.")

success_msg("Maravilha! Continue com o próximo exercício e veja como você pode combinar os resultados da função `rbind()` com a função `colSums()`!")
```

---

## Receita total de bilheteria de toda a saga

```yaml
type: NormalExercise
key: 1bfe5ae096
xp: 100
skills:
  - 1
```

Assim como `cbind()` tem `rbind()`, `colSums()` tem `rowSums()`. Seu espaço de trabalho do R já contém `all_wars_matrix`, que você construiu no exercício anterior; digite `all_wars_matrix` para dar outra olhada. Agora vamos calcular a receita total de bilheteria de toda a saga.

`@instructions`
- Calcule a receita total nos EUA e fora dos EUA e atribua o resultado a `total_revenue_vector`. Você pode usar a função `colSums()`.
- Imprima `total_revenue_vector` para dar uma olhada nos resultados.

`@hint`
Você deve usar a função `colSums()` com `star_wars_matrix` como argumento para chegar à bilheteria total por região.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

`@sct`
```{r}
msg = "Não altere o conteúdo de `all_wars_matrix`; ele foi criado para você no espaço de trabalho."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(eq_condition = "equal", incorrect_msg = msg)

ex() %>% check_function("colSums") %>% check_arg('x') %>% check_equal(incorrect_msg = "Você usou a função `colSums()` no all_wars_matrix?")

ex() %>% check_object("total_revenue_vector") %>% check_equal(incorrect_msg = "Você atribuiu corretamente o resultado de `colSums(all_wars_matrix)` a `total_revenue_vector`?")

ex() %>% check_output_expr("total_revenue_vector", missing_msg = "Não se esqueça de imprimir `total_revenue_vector`!")

success_msg("Bellissimo! Vá para o próximo exercício para aprender sobre subsetting de matrizes.")
```

---

## Seleção de elementos de matrizes

```yaml
type: NormalExercise
key: 41d9d69713
xp: 100
skills:
  - 1
```

Assim como nos vetores, podemos usar colchetes `[ ]` para selecionar um ou vários elementos de uma matriz. Enquanto os vetores têm uma dimensão, as matrizes têm duas dimensões. Portanto, devemos usar vírgula para separar as linhas que desejamos selecionar das colunas. Por exemplo: 

- `my_matrix[1,2]` seleciona o elemento da primeira linha e da segunda coluna.
- `my_matrix[1:3,2:4]` resulta em uma matriz com os dados das linhas 1, 2 e 3 e colunas 2, 3 e 4.

Se quiser selecionar todos os elementos de uma linha ou coluna, não será necessário nenhum número antes ou depois da vírgula, respectivamente:

- `my_matrix[,1]` seleciona todos os elementos da primeira coluna.
- `my_matrix[1,]` seleciona todos os elementos da primeira linha.

Volte para Star Wars com esses conhecimentos recém-adquiridos! Assim como no exercício anterior, `all_wars_matrix` já está disponível no espaço de trabalho.

`@instructions`
- Selecione a receita de todos os filmes fora dos EUA (a segunda coluna inteira de `all_wars_matrix`) e armazene o resultado como `non_us_all`.
- Use `mean()` com `non_us_all` para calcular a receita média de todos os filmes fora dos EUA. Imprima o resultado de novo.
- Dessa vez, selecione a receita fora dos EUA referente aos dois primeiros filmes em `all_wars_matrix`. Armazene o resultado como `non_us_some`.
- Use `mean()` de novo para imprimir a média dos valores de `non_us_some`.

`@hint`
Você pode selecionar a segunda coluna inteira de uma matriz chamada `my_matrix` com `my_matrix[,2]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

`@sct`
```{r}
msg = "Não altere o conteúdo de `all_wars_matrix`; essa matriz já foi criada para você no workspace."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("non_us_all") %>% check_equal(incorrect_msg = "Você atribuiu a `non_us_all` a segunda coluna inteira de `all_wars_matrix`? Você pode usar `[, 2]` para fazer isso!")

ex() %>% check_output_expr("mean(non_us_all)", missing_msg = "Você calculou a média dos valores em `non_us_all` chamando `mean(non_us_all)`? Simplesmente imprima o resultado.")

ex() %>% check_object("non_us_some") %>% check_equal(incorrect_msg = "Você atribuiu a `non_us_some` a receita não americana dos dois primeiros filmes? Você pode usar `[1:2,2]` para fazer isso!")

ex() %>% check_output_expr("mean(non_us_some)", missing_msg = "Você calculou a média dos valores em `non_us_some` chamando `mean(non_us_some)`? Simplesmente imprima o resultado.")

success_msg("Mandou bem! Continue para o próximo exercício.")
```

---

## Algumas contas com matrizes

```yaml
type: NormalExercise
key: c81c656f06
xp: 100
skills:
  - 1
```

Assim como o que você aprendeu sobre vetores, os operadores padrão como `+`, `-`, `/`, `*`, etc. atuam elemento a elemento em matrizes do R. 

Por exemplo: `2 * my_matrix` multiplica cada elemento de `my_matrix` por dois.

Como analista de dados recém-contratado pela Lucasfilm, seu trabalho é descobrir quantos espectadores assistiram a cada filme em cada região geográfica. Você já tem os números da receita total em `all_wars_matrix`. Suponha que o preço de um ingresso seja 5 dólares. Basta dividir os números da bilheteria pelo preço do ingresso para obter o número de espectadores.

`@instructions`
- Divida `all_wars_matrix` por 5, obtendo o número de espectadores em milhões. Atribua a matriz resultante a `visitors`.
- Imprima `visitors` para poder dar uma olhada.

`@hint`
O número de espectadores é igual a `all_wars_matrix` dividido por 5.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

`@sct`
```{r}
msg = "Não altere o conteúdo de `all_wars_matrix`; essa matriz já foi criada para você no ambiente de trabalho."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Parece que `visitors` não está correto. Basta dividir `all_wars_matrix` por 5 e armazenar a matriz resultante como `visitors`.")

ex() %>% check_output_expr("visitors", missing_msg = "Não se esqueça de também imprimir `visitors` para dar uma olhada.")


success_msg("Ótimo! O que esses resultados te dizem? Um impressionante número de 92 milhões de pessoas foram ver A New Hope nos cinemas dos EUA! Continue para o próximo exercício.")
```

---

## Algumas contas com matrizes

```yaml
type: NormalExercise
key: 1e0b39d6e9
xp: 100
skills:
  - 1
```

Assim como `2 * my_matrix` multiplica cada elemento de `my_matrix` por dois, `my_matrix1 * my_matrix2` cria uma matriz em que cada elemento é o produto dos elementos correspondentes em `my_matrix1` e `my_matrix2`. 

Depois de analisar o resultado do exercício anterior, o chefão Lucas ressalta que o valor dos ingressos aumentou ao longo do tempo. Ele pede para refazer a análise com base nos preços que você pode encontrar em `ticket_prices_matrix` (fonte: imaginação).

_Aqueles que estão familiarizados com matrizes devem observar que essa não se trata da multiplicação de matriz padrão, na qual devemos usar `%*%` no R._

`@instructions`
- Divida `all_wars_matrix` por `ticket_prices_matrix` para obter o número estimado de espectadores nos EUA e fora dos EUA para os seis filmes. Atribua o resultado a `visitors`.
- Na matriz `visitors`, selecione a primeira coluna inteira, que representa o número de espectadores nos EUA. Armazene essa seleção como `us_visitors`.
- Calcule o número médio de espectadores nos EUA e imprima o resultado.

`@hint`
- Você pode usar a função `mean()` para calcular a média das entradas da função.
- Para obter o número de espectadores nos EUA, selecione a primeira coluna de `visitors` usando `visitors[ ,1]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
col_titles <- c("US","non-US")
ticket_prices_matrix <- matrix(c(5, 5, 6, 6, 7, 7, 4, 4, 4.5, 4.5, 4.9, 4.9), nrow = 6, byrow = TRUE, dimnames = list(movie_names,col_titles))
```

`@sample_code`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

`@solution`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

`@sct`
```{r}
msg <- "Não altere o conteúdo de `all_wars_matrix`; essa matriz já foi criada para você no ambiente de trabalho."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("ticket_prices_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Você criou corretamente a matriz `visitors`? Você deve dividir `all_wars_matrix` por `ticket_prices_matrix` para chegar lá.")

ex() %>% check_object("us_visitors") %>% check_equal(incorrect_msg = "Para criar `us_visitors`, você deve selecionar corretamente toda a primeira coluna de `visitors`. Você pode usar `[,1]` para isso!")

ex() %>% check_output_expr("mean(us_visitors)", missing_msg = "Depois de criar `us_visitors`, você pode usar `mean()` para calcular a média de visitantes nos EUA. Certifique-se de imprimir o resultado.")

success_msg("É um fato: a força R está com você! Este exercício conclui o capítulo sobre matrizes. Próxima parada na sua jornada pela linguagem R: fatores.")
```
