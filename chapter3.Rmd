---
title_meta: Capitolo 3
title: Matrici
description: >-
  In questo capitolo imparerai a lavorare con le matrici in R. Alla fine sarai
  in grado di crearle ed eseguire con esse calcoli di base. Analizzerai gli
  incassi dei film di Star Wars e metterai in pratica quanto appreso. Che la
  forza sia con te! Analizzerai gli incassi dei film di Star Wars e imparerai a
  usare le matrici in R. Che la forza sia con te!
---

## Cos'è una matrice?

```yaml
type: NormalExercise
key: d61aeba84c
xp: 100
skills:
  - 1
```

In R, una matrice è un insieme di elementi dello stesso tipo (numerici, caratteri o logici), organizzati in righe e colonne. E poiché si lavora solo con righe e colonne, una matrice è una struttura bidimensionale. 

Puoi costruire una matrice con la funzione `matrix()`. Considera il seguente esempio:

```
matrix(1:9, byrow = TRUE, nrow = 3)
```

Nella funzione `matrix()`:

- Il primo argomento è l’insieme di elementi che R disporrà nelle righe e nelle colonne della matrice. In questo caso, utilizziamo `1:9` come scorciatoia per `c(1, 2, 3, 4, 5, 6, 7, 8, 9)`.
- L'argomento `byrow` indica che i dati vengono inseriti riga per riga. Se volessimo inserirli colonna per colonna, dovremmo digitare `byrow = FALSE`. 
- Il terzo argomento `nrow` specifica che la matrice avrà 3 righe.

`@instructions`
Costruisci una matrice con 3 righe contenenti i numeri da 1 a 9, riempite riga per riga.

`@hint`
Leggi attentamente l’esercizio, la risposta ti è già stata data!

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
```

`@solution`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
matrix(1:9, byrow = TRUE, nrow = 3)
```

`@sct`
```{r}
ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Hai creato correttamente la matrice? Dai un'occhiata all'assegnazione, la risposta è già data!")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Hai creato correttamente la matrice? Dai un'occhiata all'assegnazione, la risposta è già data!")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Hai creato correttamente la matrice? Dai un'occhiata all'assegnazione, la risposta è già data!")
	}

ex() %>% check_output_expr("matrix(1:9, byrow=TRUE, nrow=3)",missing_msg = "Sembra esserci un problema con la definizione della matrice. Dai un'occhiata all'assegnazione, la risposta è già data!")

success_msg("Ottimo! Continua con l'esercizio successivo.")
```

---

## Le matrici, analizzerai

```yaml
type: NormalExercise
key: effc2fb945
xp: 100
skills:
  - 1
```

Ora è il momento di sporcarsi le mani. Nei seguenti esercizi analizzerai gli incassi del franchise di Star Wars. Che la forza sia con te! 

Nell'editor vengono definiti tre vettori. Ognuno di essi rappresenta i numeri degli incassi dei primi tre film di Star Wars. Il primo elemento di ogni vettore indica gli incassi degli Stati Uniti, il secondo elemento si riferisce agli incassi non statunitensi (fonte: Wikipedia).

In questo esercizio, combinerai tutte queste cifre in un unico vettore. Successivamente, costruirai una matrice a partire da tale vettore.

`@instructions`
- Usa `c(new_hope, empire_strikes, return_jedi)` per combinare i tre vettori in un unico vettore, che chiamerai `box_office`.
- Costruisci una matrice con 3 righe, dove ogni riga rappresenta un film. Per farlo, utilizza la funzione `matrix()`. Il primo argomento è il vettore `box_office`, contenente tutti gli incassi al botteghino. Poi dovrai specificare `nrow = 3` e `byrow = TRUE`. Nomina la matrice risultante `star_wars_matrix`.

`@hint`
- `box_office <- c(new_hope, empire_strikes, return_jedi)` combinerà tutti i numeri contenuti nei tre vettori in un unico vettore con 6 elementi.
- `matrix(box_office, nrow = ..., byrow =  ...)` è un modello per la soluzione del secondo passaggio.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- 

# Construct star_wars_matrix
star_wars_matrix <- 
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- c(new_hope, empire_strikes, return_jedi)

# Construct star_wars_matrix
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE) 
```

`@sct`
```{r}
msg <- "Non cambiare nulla delle variabili del box office `new_hope`, `empire_strikes` e `return_jedi`!"

ex() %>% check_object("new_hope", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("empire_strikes", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("return_jedi", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("box_office") %>% check_equal(incorrect_msg = "Hai combinato correttamente i valori di `new_hope`, `empire_strikes` e `return_jedi` nel vettore `box_office`?")

ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Assicurati di specificare correttamente gli argomenti che passi a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Assicurati di specificare correttamente gli argomenti che passi a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Assicurati di specificare correttamente gli argomenti che passi a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	}

ex() %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = "Hai assegnato il risultato della chiamata a `matrix()` a `star_wars_matrix`?")

success_msg("La forza è davvero con te! Continua con l'esercizio successivo.")
```

---

## Nominare una matrice

```yaml
type: NormalExercise
key: f734e8bf74
xp: 100
skills:
  - 1
```

Per aiutarti a ricordare cosa è memorizzato in `star_wars_matrix`, può essere utile aggiungere i nomi dei film alle righe. Questo non solo ti aiuta a leggere i dati, ma facilita anche la selezione di determinati elementi. 

Proprio come per i vettori, puoi assegnare nomi alle righe e alle colonne di una matrice utilizzando:

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

Abbiamo già preparato due vettori per te: `region`, e `titles`. Ti serviranno per nominare, rispettivamente, le colonne e le righe di `star_wars_matrix`.

`@instructions`
- Usa `colnames()` per nominare le colonne di `star_wars_matrix` con il vettore `region`.
- Usa `rownames()` per nominare le righe di `star_wars_matrix` con il vettore `titles`.
- Stampa `star_wars_matrix` per vedere il risultato del tuo lavoro.

`@hint`
Puoi usare `colnames(star_wars_matrix) <- region` per nominare le colonne di `star_wars_matrix`. Fai lo stesso per nominare le righe.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region


# Name the rows with titles


# Print out star_wars_matrix
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region
colnames(star_wars_matrix) <- region

# Name the rows with titles
rownames(star_wars_matrix) <- titles

# Print out star_wars_matrix
star_wars_matrix
```

`@sct`
```{r}
msg <- "Non cambiare nulla delle variabili del box office `new_hope`, `empire_strikes` e `return_jedi`!"

ex()  %>% check_object("new_hope", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("empire_strikes", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("return_jedi", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

msg <- "Non cambiare il contenuto di `star_wars_matrix`; solo i nomi delle righe e delle colonne!" 

ex()  %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = msg)

msg <- "Non cambiare nulla dei vettori `region` e `titles` che sono stati definiti per te."

ex()  %>% check_object("region", undefined_msg = msg)  %>%  check_equal(incorrect_msg = msg)
ex() %>% check_object("titles", undefined_msg = msg) %>% check_equal( incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix") %>% check_equal(eq_condition = "equal",incorrect_msg = "Hai impostato correttamente i nomi delle righe e delle colonne di `star_wars_matrix`? Usa `colnames(star_wars_matrix) <- region` per i nomi delle colonne; fai una cosa simile per nominare le righe.")

ex() %>% check_output_expr("star_wars_matrix", missing_msg = "Non dimenticare di stampare `star_wars_matrix` dopo aver nominato le righe e le colonne.")

success_msg("Ottimo! Sei sulla strada per diventare un jedi di R! Continua con l'esercizio successivo.")
```

---

## Calcolo degli incassi mondiali

```yaml
type: NormalExercise
key: 3fd7499a12
xp: 100
skills:
  - 1
```

A Hollywood, ciò che conta di più perché un film diventi subito una leggenda sono gli incassi mondiali. 

Per calcolare il totale degli incassi dei tre film di Star Wars, devi sommare la colonna degli incassi statunitensi e quella degli incassi non statunitensi. 

In R, la funzione `rowSums()` calcola facilmente i totali per ogni riga di una matrice. Questa funzione crea un nuovo vettore:

```
rowSums(my_matrix)
```

`@instructions`
Calcola gli incassi mondiali dei tre film e inseriscili nel vettore denominato `worldwide_vector`.

`@hint`
`rowSums(star_wars_matrix)` calcolerà la somma di ogni riga, quindi il totale degli incassi per ogni film.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
                 "The Empire Strikes Back", 
                 "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)
```

`@sct`
```{r}
msg <- "Non cambiare nulla delle variabili preimpostate `box_office_all` e `star_wars_marix`!"

ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Chiama `rowSums()` su `star_wars_matrix` e memorizza il risultato in `worldwide_vector`.")

success_msg("Ben fatto! Continua con l'esercizio successivo.")
```

---

## Aggiungere una colonna per gli incassi mondiali

```yaml
type: NormalExercise
key: 86b87a8545
xp: 100
skills:
  - 1
```

Nell'esercizio precedente hai calcolato il vettore che conteneva gli incassi mondiali di ciascuno dei tre film di Star Wars. Tuttavia, questo vettore non fa ancora parte di `star_wars_matrix`.

Puoi aggiungere una colonna o più colonne a una matrice con la funzione `cbind()`, che unisce matrici e/o vettori per colonna. Ad esempio: 

```
big_matrix <- cbind(matrix1, matrix2, vector1 ...)
```

`@instructions`
Aggiungi `worldwide_vector` come nuova colonna a `star_wars_matrix` e assegna il risultato a `all_wars_matrix`. Usa la funzione `cbind()`.

`@hint`
In questo esercizio, devi passare due variabili a `cbind()`: `star_wars_matrix` e `worldwide_vector`, in quest’ordine. Assegna il risultato a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- cbind(star_wars_matrix, worldwide_vector)
```

`@sct`
```{r}
msg <- "Non cambiare nulla delle variabili preimpostate `box_office_all` e `star_wars_marix`!"
ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(, incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Memorizza il risultato di `rowSums(star_wars_matrix)` in `worldwide_vector`.")


msg <- "Hai usato correttamente `cbind()` per aggiungere `worldwide_vector` a `star_wars_matrix`? Dovresti passare `star_wars_matrix` e `world_wide_vector` a `cbind()`, in quest'ordine. La matrice risultante, `all_wars_matrix`, dovrebbe consistere di tre righe e tre colonne."
ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = msg)


success_msg("Ottimo lavoro! Dopo aver aggiunto una colonna a una matrice, il passo logico successivo è aggiungere righe. Scopri come nel prossimo esercizio.");
```

---

## Aggiungere una riga

```yaml
type: NormalExercise
key: bcadb29139
xp: 100
skills:
  - 1
```

Proprio come ogni azione ha una reazione, ad ogni `cbind()` corrisponde un `rbind()`. (Lo ammettiamo, siamo pessimi con le metafore). 

Il tuo spazio di lavoro R, in cui tutte le variabili che hai definito sono “live” ([scopri cos'è uno spazio di lavoro](http://www.statmethods.net/interface/workspace.html)), è già pronto e contiene due matrici:

- `star_wars_matrix`, con i dati della trilogia originale che hai sempre utilizzato;
- `star_wars_matrix2`, con dati simili per la trilogia prequel. 

Esplora queste matrici nella console per esaminarle meglio. Se vuoi visualizzare gli elementi presenti nello spazio di lavoro, digita `ls()` nella console.

`@instructions`
Usa `rbind()` per unire `star_wars_matrix` e `star_wars_matrix2`, in quest’ordine. Assegna la matrice risultante a `all_wars_matrix`.

`@hint`
Unisci le due matrici in questo modo:
```
rbind(matrix1, matrix2)
```
Assegna il risultato a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# Construct matrix
box_office_all <- c(461, 314.4, 290.5, 247.9, 309.3, 165.8)
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi")
col_titles <- c("US","non-US")
star_wars_matrix <- matrix(box_office_all, nrow = 3, byrow = TRUE, dimnames = list(movie_names, col_titles))

# Construct matrix2
box_office_all2 <- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)
movie_names2 <- c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
star_wars_matrix2 <- matrix(box_office_all2, nrow=3, byrow = TRUE, dimnames = list(movie_names2, col_titles))

# remove all except all_wars_matrix
rm(box_office_all)
rm(movie_names)
rm(col_titles)
rm(box_office_all2)
rm(movie_names2)
```

`@sample_code`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2)
```

`@sct`
```{r}
msg = "Non sovrascrivere le variabili che sono state definite per te nell'area di lavoro (`star_wars_matrix` e `star_wars_matrix2`)."
ex() %>% check_object("star_wars_matrix",  undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix2", undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = "Hai usato correttamente `rbind()` per creare `all_wars_matrix()`? `rbind()` dovrebbe prendere due argomenti: `star_wars_matrix` e `star_wars_matrix2`, in quest'ordine.")

success_msg("Meraviglioso! Continua con il prossimo esercizio e scopri come puoi combinare i risultati della funzione `rbind()` con la funzione `colSums()`!")
```

---

## Gli incassi totali dell'intera saga

```yaml
type: NormalExercise
key: 1bfe5ae096
xp: 100
skills:
  - 1
```

Proprio come `cbind()` ha `rbind()`, `colSums()` ha `rowSums()`. Il tuo spazio di lavoro R contiene già `all_wars_matrix` che hai costruito nell'esercizio precedente. Puoi digitare `all_wars_matrix` nella console per dare un’altra occhiata ai dati. Calcoliamo ora gli incassi totali dell'intera saga.

`@instructions`
- Calcola il fatturato totale per gli Stati Uniti e per l'area non statunitense e assegna `total_revenue_vector`. Puoi utilizzare la funzione `colSums()`.
- Stampa `total_revenue_vector` per dare un'occhiata ai risultati.

`@hint`
Utilizza la funzione `colSums()` con `star_wars_matrix` come argomento per ottenere il totale degli incassi per regione.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

`@sct`
```{r}
msg = "Non cambiare il contenuto di `all_wars_matrix`; è stato creato per te nell'ambiente di lavoro."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(eq_condition = "equal", incorrect_msg = msg)

ex() %>% check_function("colSums") %>% check_arg('x') %>% check_equal(incorrect_msg = "Hai usato la funzione `colSums()` su all_wars_matrix?")

ex() %>% check_object("total_revenue_vector") %>% check_equal(incorrect_msg = "Hai assegnato correttamente il risultato di `colSums(all_wars_matrix)` a `total_revenue_vector`?")

ex() %>% check_output_expr("total_revenue_vector", missing_msg = "Non dimenticare di stampare `total_revenue_vector`!")

success_msg("Bellissimo! Vai al prossimo esercizio per imparare il sottoinsieme delle matrici.")
```

---

## Selezionare elementi della matrice

```yaml
type: NormalExercise
key: 41d9d69713
xp: 100
skills:
  - 1
```

Come per i vettori, puoi utilizzare le parentesi quadre `[ ]` per selezionare uno o più elementi di una matrice. Mentre i vettori hanno una dimensione, le matrici ne hanno due. Quindi dovrai usare una virgola per separare gli indici delle righe da quelli delle colonne. Ad esempio: 

- `my_matrix[1,2]` seleziona l'elemento nella prima riga e nella seconda colonna.
- `my_matrix[1:3,2:4]` genera una matrice con i dati sulle righe 1, 2, 3 e sulle colonne 2, 3, 4.

Se vuoi selezionare tutti gli elementi di una riga o di una colonna, non è necessario alcun numero prima o dopo la virgola:

- `my_matrix[,1]` seleziona tutti gli elementi della prima colonna.
- `my_matrix[1,]` seleziona tutti gli elementi della prima riga.

Torniamo a Star Wars con queste nuove conoscenze! Come nell'esercizio precedente, `all_wars_matrix` è già disponibile nel tuo spazio di lavoro.

`@instructions`
- Seleziona le entrate non statunitensi per tutti i film (l'intera seconda colonna di `all_wars_matrix`), memorizza il risultato come `non_us_all`.
- Utilizza `mean()` su `non_us_all` per calcolare l'incasso medio non statunitense per tutti i film. Quindi stampa il risultato.
- Questa volta, seleziona le entrate non statunitensi per i primi due film in `all_wars_matrix`. Memorizza il risultato come `non_us_some`.
- Usa di nuovo `mean()` per stampare la media dei valori in `non_us_some`.

`@hint`
Puoi selezionare tutta la seconda colonna di una matrice `my_matrix` con `my_matrix[,2]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

`@sct`
```{r}
msg = "Non cambiare il contenuto di `all_wars_matrix`; questa matrice è già stata creata per te nello spazio di lavoro."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("non_us_all") %>% check_equal(incorrect_msg = "Hai assegnato a `non_us_all` l'intera seconda colonna di `all_wars_matrix`? Puoi usare `[, 2]` per farlo!")

ex() %>% check_output_expr("mean(non_us_all)", missing_msg = "Hai calcolato la media dei valori in `non_us_all` chiamando `mean(non_us_all)`? Stampa semplicemente il risultato.")

ex() %>% check_object("non_us_some") %>% check_equal(incorrect_msg = "Hai assegnato a `non_us_some` il reddito non statunitense per i primi due film? Puoi usare `[1:2,2]` per farlo!")

ex() %>% check_output_expr("mean(non_us_some)", missing_msg = "Hai calcolato la media dei valori in `non_us_some` chiamando `mean(non_us_some)`? Stampa semplicemente il risultato.")

success_msg("Ottimo! Continua con l'esercizio successivo.")
```

---

## Un po' di aritmetica con le matrici

```yaml
type: NormalExercise
key: c81c656f06
xp: 100
skills:
  - 1
```

Analogamente a quanto hai imparato con i vettori, gli operatori standard come `+`, `-`, `/`, `*`, ecc. funzionano elemento per elemento sulle matrici in R. 

Ad esempio, `2 * my_matrix` moltiplica ogni elemento di `my_matrix` per due.

In qualità di Data Analyst appena assunto dalla Lucasfilm, il tuo compito è scoprire quanti spettatori hanno assistito a ogni film in ogni area geografica. Hai già le cifre degli incassi totali in `all_wars_matrix`. Supponiamo che il prezzo di un biglietto fosse di 5 dollari. Dividendo semplicemente i numeri del botteghino per il prezzo del biglietto si ottiene il numero di spettatori.

`@instructions`
- Dividi `all_wars_matrix` per 5, ottenendo così il numero di spettatori in milioni. Assegna la matrice risultante a `visitors`.
- Stampa `visitors` per vedere il risultato.

`@hint`
Il numero di spettatori è pari a `all_wars_matrix` diviso 5.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

`@sct`
```{r}
msg = "Non cambiare il contenuto di `all_wars_matrix`; questa matrice è già stata creata per te nello spazio di lavoro."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Sembra che `visitors` non sia corretto. Dividi semplicemente `all_wars_matrix` per 5 e memorizza la matrice risultante come `visitors`.")

ex() %>% check_output_expr("visitors", missing_msg = "Non dimenticare di stampare anche `visitors` così puoi dare un'occhiata.")

success_msg("Ottimo! Cosa ti dicono questi risultati? Ben 92 milioni di persone sono andate a vedere A New Hope nei cinema statunitensi! Continua con l'esercizio successivo.")
```

---

## Un po' di aritmetica con le matrici (2)

```yaml
type: NormalExercise
key: 1e0b39d6e9
xp: 100
skills:
  - 1
```

Proprio come `2 * my_matrix` ha moltiplicato per due ogni elemento di `my_matrix`, `my_matrix1 * my_matrix2` crea una matrice in cui ogni elemento è il prodotto degli elementi corrispondenti a `my_matrix1` e `my_matrix2`. 

Dopo aver esaminato i risultati dell'esercizio precedente, il boss supremo Lucas fa notare che i prezzi dei biglietti sono aumentati nel tempo. Chiede di rifare l'analisi in base ai prezzi che si possono trovare su `ticket_prices_matrix` (fonte: la nostra immaginazione).

_Chi ha familiarità con le matrici dovrebbe notare che questa non è la moltiplicazione tra matrici standard, per la quale in R si usa l’operatore `%*%`._

`@instructions`
- Dividi `all_wars_matrix` per `ticket_prices_matrix` per ottenere il numero stimato di visitatori statunitensi e non statunitensi per i sei film. Assegna il risultato a `visitors`.
- Dalla matrice `visitors`, seleziona l'intera prima colonna, che rappresenta il numero di visitatori negli Stati Uniti. Salva questa selezione come `us_visitors`.
- Calcola il numero medio di visitatori statunitensi; stampa il risultato.

`@hint`
- Puoi utilizzare la funzione `mean()` per calcolare la media degli input forniti.
- Per ottenere il numero di visitatori negli Stati Uniti, seleziona la prima colonna da `visitors` utilizzando `visitors[ ,1]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
col_titles <- c("US","non-US")
ticket_prices_matrix <- matrix(c(5, 5, 6, 6, 7, 7, 4, 4, 4.5, 4.5, 4.9, 4.9), nrow = 6, byrow = TRUE, dimnames = list(movie_names,col_titles))
```

`@sample_code`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

`@solution`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

`@sct`
```{r}
msg <- "Non cambiare il contenuto di `all_wars_matrix`; questa matrice è già stata creata per te nell'ambiente di lavoro."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("ticket_prices_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Hai creato correttamente la matrice `visitors`? Dovresti dividere `all_wars_matrix` per `ticket_prices_matrix` per ottenerla.")

ex() %>% check_object("us_visitors") %>% check_equal(incorrect_msg = "Per creare `us_visitors`, dovresti selezionare correttamente l'intera prima colonna da `visitors`. Puoi usare `[,1]` per questo!")

ex() %>% check_output_expr("mean(us_visitors)", missing_msg = "Una volta creato `us_visitors`, puoi usare `mean()` per calcolare il numero medio di visitatori negli Stati Uniti. Assicurati di stampare il risultato.")

success_msg("È un dato di fatto: la forza di R è con te! Questo esercizio conclude il capitolo sulle matrici. Prossima tappa nel tuo viaggio attraverso il linguaggio R: i fattori.")
```
