---
title_meta: Capítulo 3
title: Matrices
description: >-
  En este capítulo aprenderás a trabajar con matrices en R. Al final del
  capítulo, serás capaz de crear matrices y comprenderás cómo hacer cálculos
  básicos con ellas. Analizarás las cifras de taquilla de las películas de Star
  Wars y aprenderás a utilizar matrices en R. ¡Que la fuerza te acompañe!
---

## ¿Qué es una matriz?

```yaml
type: NormalExercise
key: d61aeba84c
xp: 100
skills:
  - 1
```

En R, una matriz es una colección de elementos del mismo tipo de datos (numéricos, de caracteres o lógicos) dispuestos en un número fijo de filas y columnas. Como solo trabajas con filas y columnas, una matriz se llama bidimensional. 

Puedes construir una matriz en R con la función `matrix()`. Considera el siguiente ejemplo:

```
matrix(1:9, byrow = TRUE, nrow = 3)
```

En la función `matrix()`:

- El primer argumento es la colección de elementos que R ordenará en las filas y columnas de la matriz. Aquí utilizamos `1:9` que es una abreviatura de `c(1, 2, 3, 4, 5, 6, 7, 8, 9)`.
- El argumento `byrow` indica que la matriz se se llena por filas. Si queremos que se llene por columnas, basta con usar `byrow = FALSE`. 
- El tercer argumento `nrow` indica que la matriz debe tener tres filas.

`@instructions`
Construye una matriz con 3 filas que contengan los números del 1 al 9, rellenadas fila a fila.

`@hint`
Lee atentamente la tarea, ¡la respuesta ya se ha dado!

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
```

`@solution`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
matrix(1:9, byrow = TRUE, nrow = 3)
```

`@sct`
```{r}
ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "¿Has creado correctamente la matriz? ¡Echa un vistazo a la tarea, la respuesta ya está dada!")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "¿Has creado correctamente la matriz? ¡Echa un vistazo a la tarea, la respuesta ya está dada!")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "¿Has creado correctamente la matriz? ¡Echa un vistazo a la tarea, la respuesta ya está dada!")
	}

ex() %>% check_output_expr("matrix(1:9, byrow=TRUE, nrow=3)",missing_msg = "Parece que hay un problema con la definición de la matriz. ¡Echa un vistazo a la tarea, la respuesta ya está dada!")

success_msg("¡Genial! Continúa con el siguiente ejercicio.")
```

---

## Analizar matrices, deberás

```yaml
type: NormalExercise
key: effc2fb945
xp: 100
skills:
  - 1
```

Ha llegado el momento de ensuciarse las manos. En los siguientes ejercicios analizarás las cifras de taquilla de la franquicia Star Wars. ¡Que la fuerza te acompañe! 

En el editor se definen tres vectores. Cada una representa las cifras de taquilla de las tres primeras películas de Star Wars. El primer elemento de cada vector indica los ingresos de taquilla en EE.UU., el segundo elemento se refiere a la taquilla fuera de EE.UU. (fuente: Wikipedia).

En este ejercicio, combinarás todas estas figuras en un único vector. A continuación, construirás una matriz a partir de este vector.

`@instructions`
- Utiliza `c(new_hope, empire_strikes, return_jedi)` para combinar los tres vectores en uno solo. Llama a este vector `box_office`.
- Construye una matriz con 3 filas, donde cada fila represente una película. Para ello, utiliza la función `matrix()`. El primer argumento es el vector `box_office`, que contiene todas las cifras de taquilla. A continuación, tendrás que especificar `nrow = 3` y `byrow = TRUE`. Nombra la matriz resultante `star_wars_matrix`.

`@hint`
- `box_office <- c(new_hope, empire_strikes, return_jedi)` combinará todos los números de los distintos vectores en un único vector con 6 elementos.
- `matrix(box_office, nrow = ..., byrow =  ...)` es una plantilla para la solución de la segunda instrucción.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- 

# Construct star_wars_matrix
star_wars_matrix <- 
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- c(new_hope, empire_strikes, return_jedi)

# Construct star_wars_matrix
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE) 
```

`@sct`
```{r}
msg <- "¡No cambies nada sobre las variables de taquilla `new_hope`, `empire_strikes` y `return_jedi`!"

ex() %>% check_object("new_hope", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("empire_strikes", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("return_jedi", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("box_office") %>% check_equal(incorrect_msg = "¿Has combinado correctamente los valores de `new_hope`, `empire_strikes` y `return_jedi` en el vector `box_office`?")

ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Asegúrate de especificar correctamente los argumentos que pasas a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Asegúrate de especificar correctamente los argumentos que pasas a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Asegúrate de especificar correctamente los argumentos que pasas a `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	}

ex() %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = "¿Asignaste el resultado de la llamada a `matrix()` a `star_wars_matrix`?")

success_msg("¡La fuerza está realmente contigo! Continúa con el siguiente ejercicio.")
```

---

## Nombrar una matriz

```yaml
type: NormalExercise
key: f734e8bf74
xp: 100
skills:
  - 1
```

Para ayudarte a recordar lo que está almacenado en `star_wars_matrix`, te gustaría añadir los nombres de las películas para las filas. Esto no solo te ayuda a leer los datos, sino que también es útil para seleccionar determinados elementos de la matriz. 

De forma similar a los vectores, puedes añadir nombres para las filas y las columnas de una matriz

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

Nos hemos adelantado y hemos preparado dos vectores para ti: `region`, y `titles`. Necesitarás estos vectores para nombrar las columnas y filas de `star_wars_matrix`, respectivamente.

`@instructions`
- Utiliza `colnames()` para nombrar las columnas de `star_wars_matrix` con el vector `region`.
- Utiliza `rownames()` para nombrar las filas de `star_wars_matrix` con el vector `titles`.
- Imprime `star_wars_matrix` para ver el resultado de tu trabajo.

`@hint`
Puedes utilizar `colnames(star_wars_matrix) <- region` para nombrar las columnas de `star_wars_matrix`. Haz algo similar para nombrar las filas.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region


# Name the rows with titles


# Print out star_wars_matrix
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region
colnames(star_wars_matrix) <- region

# Name the rows with titles
rownames(star_wars_matrix) <- titles

# Print out star_wars_matrix
star_wars_matrix
```

`@sct`
```{r}
msg <- "No cambies nada sobre las variables de taquilla `new_hope`, `empire_strikes` y `return_jedi`!"

ex()  %>% check_object("new_hope", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("empire_strikes", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("return_jedi", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

msg <- "No cambies el contenido de `star_wars_matrix`; solo los nombres de las filas y columnas!" 

ex()  %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = msg)

msg <- "No cambies nada sobre los vectores `region` y `titles` que han sido definidos para ti."

ex()  %>% check_object("region", undefined_msg = msg)  %>%  check_equal(incorrect_msg = msg)
ex() %>% check_object("titles", undefined_msg = msg) %>% check_equal( incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix") %>% check_equal(eq_condition = "equal",incorrect_msg = "¿Has configurado correctamente los nombres de las filas y columnas de `star_wars_matrix`? Usa `colnames(star_wars_matrix) <- region` para los nombres de las columnas; haz algo similar para nombrar las filas.")

ex() %>% check_output_expr("star_wars_matrix", missing_msg = "No olvides imprimir `star_wars_matrix` después de haber nombrado las filas y columnas.")

success_msg("¡Genial! ¡Estás en camino de convertirte en un jedi de R! Continúa con el siguiente ejercicio.")
```

---

## Cálculo de la taquilla mundial

```yaml
type: NormalExercise
key: 3fd7499a12
xp: 100
skills:
  - 1
```

Lo más importante para que una película se convierta en una leyenda instantánea en Tinseltown son sus cifras de taquilla en todo el mundo. 

Para calcular los ingresos totales de taquilla de las tres películas de Star Wars, tienes que tomar la suma de la columna de ingresos en EE.UU. y la columna de ingresos fuera de EE.UU. 

En R, la función `rowSums()` calcula cómodamente los totales de cada fila de una matriz. Esta función crea un nuevo vector:

```
rowSums(my_matrix)
```

`@instructions`
Calcula las cifras de taquilla mundial de las tres películas y ponlas en el vector llamado `worldwide_vector`.

`@hint`
`rowSums(star_wars_matrix)` calculará la suma de cada fila, es decir, la taquilla total de cada película.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
                 "The Empire Strikes Back", 
                 "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)
```

`@sct`
```{r}
msg <- "¡No cambies nada sobre las variables predefinidas `box_office_all` y `star_wars_marix`!"

ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Llama a `rowSums()` en `star_wars_matrix` y guarda el resultado en `worldwide_vector`.")

success_msg("¡Bien hecho! Continúa con el siguiente ejercicio.")
```

---

## Añadir una columna para la taquilla mundial

```yaml
type: NormalExercise
key: 86b87a8545
xp: 100
skills:
  - 1
```

En el ejercicio anterior calculaste el vector que contenía la recaudación mundial de cada una de las tres películas de Star Wars. Sin embargo, este vector aún no forma parte de `star_wars_matrix`.

Puedes añadir una columna o varias columnas a una matriz con la función `cbind()`, que fusiona matrices y/o vectores por columnas. Por ejemplo: 

```
big_matrix <- cbind(matrix1, matrix2, vector1 ...)
```

`@instructions`
Añade `worldwide_vector` como nueva columna a `star_wars_matrix` y asigna el resultado a `all_wars_matrix`. Utiliza la función `cbind()`.

`@hint`
En este ejercicio, debes pasar dos variables a `cbind()`: `star_wars_matrix` y `worldwide_vector`, en este orden. Asigna el resultado a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- cbind(star_wars_matrix, worldwide_vector)
```

`@sct`
```{r}
msg <- "¡No cambies nada sobre las variables predefinidas `box_office_all` y `star_wars_marix`!"
ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(, incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Guarda el resultado de `rowSums(star_wars_matrix)` en `worldwide_vector`.")

msg <- "¿Has usado correctamente `cbind()` para añadir `worldwide_vector` a `star_wars_matrix`? Deberías pasar `star_wars_matrix` y `world_wide_vector` a `cbind()`, en este orden. La matriz resultante, `all_wars_matrix`, debería consistir en tres filas y tres columnas."
ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = msg)

success_msg("¡Buen trabajo! Después de añadir una columna a una matriz, el siguiente paso lógico es añadir filas. Aprende cómo en el siguiente ejercicio.");
```

---

## Añadir una fila

```yaml
type: NormalExercise
key: bcadb29139
xp: 100
skills:
  - 1
```

Al igual que toda acción tiene una reacción, toda `cbind()` tiene una `rbind()`. (Lo admitimos, somos bastante malos con las metáforas). 

Tu espacio de trabajo de R, donde "viven" todas las variables que has definido[(consulta qué es un espacio de trabajo](http://www.statmethods.net/interface/workspace.html)), ya se ha inicializado y contiene dos matrices:

- `star_wars_matrix` que hemos utilizado todo el tiempo, con datos sobre la trilogía original,
- `star_wars_matrix2`con datos similares para la trilogía de las precuelas. 

Explora estas matrices en la consola si quieres verlas más de cerca. Si quieres comprobar el contenido del espacio de trabajo, puedes escribir `ls()` en la consola.

`@instructions`
Utiliza `rbind()` para pegar `star_wars_matrix` y `star_wars_matrix2`, en este orden. Asigna la matriz resultante a `all_wars_matrix`.

`@hint`
Une las dos matrices así:
```
rbind(matrix1, matrix2)
```
Asigna el resultado a `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# Construct matrix
box_office_all <- c(461, 314.4, 290.5, 247.9, 309.3, 165.8)
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi")
col_titles <- c("US","non-US")
star_wars_matrix <- matrix(box_office_all, nrow = 3, byrow = TRUE, dimnames = list(movie_names, col_titles))

# Construct matrix2
box_office_all2 <- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)
movie_names2 <- c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
star_wars_matrix2 <- matrix(box_office_all2, nrow=3, byrow = TRUE, dimnames = list(movie_names2, col_titles))

# remove all except all_wars_matrix
rm(box_office_all)
rm(movie_names)
rm(col_titles)
rm(box_office_all2)
rm(movie_names2)
```

`@sample_code`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2)
```

`@sct`
```{r}
msg = "No sobrescribas las variables que se han definido para ti en el espacio de trabajo (`star_wars_matrix` y `star_wars_matrix2`)."
ex() %>% check_object("star_wars_matrix",  undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix2", undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = "¿Usaste `rbind()` correctamente para crear `all_wars_matrix()`? `rbind()` debería tomar dos argumentos: `star_wars_matrix` y `star_wars_matrix2`, en este orden.")

success_msg("¡Maravilloso! ¡Continúa con el siguiente ejercicio y ve cómo puedes combinar los resultados de la función `rbind()` con la función `colSums()`!")
```

---

## Los ingresos totales en taquilla de toda la saga

```yaml
type: NormalExercise
key: 1bfe5ae096
xp: 100
skills:
  - 1
```

Igual que `cbind()` tiene `rbind()`, `colSums()` tiene `rowSums()`. Tu espacio de trabajo de R ya contiene el `all_wars_matrix` que construiste en el ejercicio anterior; escribe `all_wars_matrix` para echarle otro vistazo. Calculemos ahora los ingresos totales en taquilla de toda la saga.

`@instructions`
- Calcula los ingresos totales de EE.UU. y de la región no estadounidense y asigna `total_revenue_vector`. Puedes utilizar la función `colSums()`.
- Imprime `total_revenue_vector` para echar un vistazo a los resultados.

`@hint`
Debes utilizar la función `colSums()` con `star_wars_matrix` como argumento para hallar la taquilla total por región.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

`@sct`
```{r}
msg = "No cambies el contenido de `all_wars_matrix`; fue creado para ti en el espacio de trabajo."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(eq_condition = "equal", incorrect_msg = msg)

ex() %>% check_function("colSums") %>% check_arg('x') %>% check_equal(incorrect_msg = "¿Usaste la función `colSums()` en el all_wars_matrix?")

ex() %>% check_object("total_revenue_vector") %>% check_equal(incorrect_msg = "¿Has asignado correctamente el resultado de `colSums(all_wars_matrix)` a `total_revenue_vector`?")

ex() %>% check_output_expr("total_revenue_vector", missing_msg = "¡No olvides imprimir `total_revenue_vector`!")

success_msg("¡Bellissimo! Dirígete al siguiente ejercicio para aprender sobre la subconfiguración de matrices.")
```

---

## Selección de los elementos de la matriz

```yaml
type: NormalExercise
key: 41d9d69713
xp: 100
skills:
  - 1
```

De forma similar a los vectores, puedes utilizar los corchetes `[ ]` para seleccionar uno o varios elementos de una matriz. Mientras que los vectores tienen una dimensión, las matrices tienen dos dimensiones. Por tanto, debes utilizar una coma para separar las filas que quieras seleccionar de las columnas. Por ejemplo: 

- `my_matrix[1,2]` selecciona el elemento en la primera fila y la segunda columna.
- `my_matrix[1:3,2:4]` da como resultado una matriz con los datos en las filas 1, 2, 3 y las columnas 2, 3, 4.

Si quieres seleccionar todos los elementos de una fila o de una columna, no es necesario ningún número antes o después de la coma, respectivamente:

- `my_matrix[,1]` selecciona todos los elementos de la primera columna.
- `my_matrix[1,]` selecciona todos los elementos de la primera fila.

¡Vuelve a Star Wars con estos conocimientos recién adquiridos! Como en el ejercicio anterior, `all_wars_matrix` ya está disponible en tu espacio de trabajo.

`@instructions`
- Selecciona los ingresos no estadounidenses de todas las películas (toda la segunda columna de `all_wars_matrix`), almacena el resultado como `non_us_all`.
- Utiliza `mean()` en `non_us_all` para calcular los ingresos medios no estadounidenses de todas las películas. Solo tienes que imprimir el resultado.
- Esta vez, selecciona los ingresos no estadounidenses de las dos primeras películas en `all_wars_matrix`. Guarda el resultado como `non_us_some`.
- Vuelve a utilizar `mean()` para imprimir la media de los valores de `non_us_some`.

`@hint`
Puedes seleccionar toda la segunda columna de una matriz `my_matrix` con `my_matrix[,2]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

`@sct`
```{r}
msg = "No cambies el contenido de `all_wars_matrix`; esta matriz ya ha sido creada para ti en el espacio de trabajo."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("non_us_all") %>% check_equal(incorrect_msg = "¿Asignaste a `non_us_all` toda la segunda columna de `all_wars_matrix`? ¡Puedes usar `[, 2]` para hacer esto!")

ex() %>% check_output_expr("mean(non_us_all)", missing_msg = "¿Has calculado el promedio de los valores en `non_us_all` llamando a `mean(non_us_all)`? Simplemente imprime el resultado.")

ex() %>% check_object("non_us_some") %>% check_equal(incorrect_msg = "¿Asignaste a `non_us_some` los ingresos no estadounidenses para las dos primeras películas? ¡Puedes usar `[1:2,2]` para hacer esto!")

ex() %>% check_output_expr("mean(non_us_some)", missing_msg = "¿Has calculado el promedio de los valores en `non_us_some` llamando a `mean(non_us_some)`? Simplemente imprime el resultado.")

success_msg("¡Bien hecho! Continúa con el siguiente ejercicio.")
```

---

## Un poco de aritmética con matrices

```yaml
type: NormalExercise
key: c81c656f06
xp: 100
skills:
  - 1
```

De forma similar a lo que has aprendido con los vectores, los operadores estándar como `+`, `-`, `/`, `*`, etc. funcionan de forma elemental sobre matrices en R. 

Por ejemplo, `2 * my_matrix` multiplica por dos cada elemento de `my_matrix`.

Como analista de datos recién contratado por Lucasfilm, tu trabajo consiste en averiguar cuántos visitantes fueron a ver cada película en cada zona geográfica. Ya tienes las cifras de ingresos totales en `all_wars_matrix`. Supongamos que el precio de un billete fuera de 5 dólares. Simplemente dividiendo las cifras de taquilla por este precio de la entrada obtienes el número de visitantes.

`@instructions`
- Divide `all_wars_matrix` por 5, lo que te dará el número de visitantes en millones. Asigna la matriz resultante a `visitors`.
- Imprime `visitors` para que puedas echar un vistazo.

`@hint`
El número de visitantes es igual a `all_wars_matrix` dividido por 5.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

`@sct`
```{r}
msg = "No cambies el contenido de `all_wars_matrix`; esta matriz ya ha sido creada para ti en el espacio de trabajo."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Parece que `visitors` no es correcto. Simplemente divide `all_wars_matrix` por 5 y guarda la matriz resultante como `visitors`.")

ex() %>% check_output_expr("visitors", missing_msg = "No olvides también imprimir `visitors` para que puedas echarle un vistazo.")

success_msg("¡Genial! ¿Qué te dicen estos resultados? ¡Un asombroso 92 millones de personas fueron a ver A New Hope en los cines de EE.UU.! Continúa con el siguiente ejercicio.")
```

---

## Un poco de aritmética con matrices (2)

```yaml
type: NormalExercise
key: 1e0b39d6e9
xp: 100
skills:
  - 1
```

Al igual que `2 * my_matrix` multiplica por dos cada elemento de `my_matrix`, `my_matrix1 * my_matrix2` crea una matriz en la que cada elemento es el producto de los elementos correspondientes de `my_matrix1` y `my_matrix2`. 

Tras observar el resultado del ejercicio anterior, el gran jefe Lucas señala que los precios de las entradas subieron con el tiempo. Pide que se rehaga el análisis basándose en los precios que puedes encontrar en `ticket_prices_matrix` (fuente: imaginación).

_Quienes estén familiarizados con las matrices deben tener en cuenta que ésta no es la multiplicación de matrices estándar para la que debes utilizar `%*%` en R._

`@instructions`
- Divide `all_wars_matrix` por `ticket_prices_matrix` para obtener el número estimado de visitantes estadounidenses y no estadounidenses de las seis películas. Asigna el resultado a `visitors`.
- En la matriz `visitors`, selecciona toda la primera columna, que representa el número de visitantes en EEUU. Guarda esta selección como `us_visitors`.
- Calcula el número medio de visitantes de EE.UU.; imprime el resultado.

`@hint`
- Puedes utilizar la función `mean()` para calcular la media de las entradas de la función.
- Para obtener el número de visitantes en EE.UU., selecciona la primera columna de `visitors` utilizando `visitors[ ,1]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
col_titles <- c("US","non-US")
ticket_prices_matrix <- matrix(c(5, 5, 6, 6, 7, 7, 4, 4, 4.5, 4.5, 4.9, 4.9), nrow = 6, byrow = TRUE, dimnames = list(movie_names,col_titles))
```

`@sample_code`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

`@solution`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

`@sct`
```{r}
msg <- "No cambies el contenido de `all_wars_matrix`; esta matriz ya ha sido creada para ti en el espacio de trabajo."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("ticket_prices_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "¿Has creado correctamente la matriz `visitors`? Deberías dividir `all_wars_matrix` por `ticket_prices_matrix` para llegar allí.")

ex() %>% check_object("us_visitors") %>% check_equal(incorrect_msg = "Para crear `us_visitors`, deberías seleccionar correctamente toda la primera columna de `visitors`. ¡Puedes usar `[,1]` para esto!")

ex() %>% check_output_expr("mean(us_visitors)", missing_msg = "Una vez que hayas creado `us_visitors`, puedes usar `mean()` para calcular el número promedio de visitantes en los EE.UU. Asegúrate de imprimir el resultado.")

success_msg("Es un hecho: ¡la fuerza de R está contigo! Este ejercicio concluye el capítulo sobre matrices. Próxima parada en tu viaje a través del lenguaje R: factores.")
```
