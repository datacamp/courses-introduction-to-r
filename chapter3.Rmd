---
title_meta: "Chapitre\_3"
title: Matrices
description: "Dans ce chapitre, vous apprendrez à travailler avec des matrices dans R. À la fin du chapitre, vous serez capable de créer des matrices et de comprendre comment effectuer des calculs de base avec elles. Vous analyserez les chiffres du box-office des films Star Wars et apprendrez à utiliser des matrices dans R. Que la Force soit avec vous\_!"
---

## Qu'est-ce qu'une matrice ?

```yaml
type: NormalExercise
key: d61aeba84c
xp: 100
skills:
  - 1
```

En R, une matrice est une collection d'éléments du même type de données (valeurs numériques, chaînes caractères ou valeurs logiques) disposés en un nombre fixe de lignes et de colonnes. Comme vous ne travaillez qu'avec des lignes et des colonnes, une matrice est dite bidimensionnelle. 

Vous pouvez construire une matrice dans R avec la fonction `matrix()`. Prenons l'exemple suivant :

```
matrix(1:9, byrow = TRUE, nrow = 3)
```

Dans la fonction `matrix()` :

- Le premier argument est la collection d'éléments que R disposera dans les lignes et les colonnes de la matrice. Nous utilisons ici `1:9` qui est un raccourci pour `c(1, 2, 3, 4, 5, 6, 7, 8, 9)`.
- L'argument `byrow` indique que la matrice est remplie par les lignes. Si nous voulons que la matrice soit remplie par les colonnes, il suffit de placer `byrow = FALSE`. 
- Le troisième argument `nrow` indique que la matrice doit avoir trois lignes.

`@instructions`
Construisez une matrice avec 3 lignes contenant les nombres de 1 à 9, remplies dans l'ordre des lignes.

`@hint`
Lisez attentivement l’énoncé, la réponse est déjà donnée.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
```

`@solution`
```{r}
# Construct a matrix with 3 rows that contain the numbers 1 up to 9
matrix(1:9, byrow = TRUE, nrow = 3)
```

`@sct`
```{r}
ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Avez-vous correctement créé la matrice ? Consultez l'affectation, la réponse est déjà donnée !")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Avez-vous correctement créé la matrice ? Consultez l'affectation, la réponse est déjà donnée !")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Avez-vous correctement créé la matrice ? Consultez l'affectation, la réponse est déjà donnée !")
	}

ex() %>% check_output_expr("matrix(1:9, byrow=TRUE, nrow=3)",missing_msg = "Il semble y avoir un problème avec la définition de la matrice. Consultez l'affectation, la réponse est déjà donnée !")

success_msg("Super ! Continuez à l'exercice suivant.")
```

---

## Analyser les matrices, vous devez

```yaml
type: NormalExercise
key: effc2fb945
xp: 100
skills:
  - 1
```

Il est maintenant temps de se salir les mains. Dans les exercices suivants, vous analyserez les chiffres du box-office de la franchise Star Wars. Que la Force soit avec vous ! 

Dans l'éditeur, trois vecteurs sont définis. Chacune représente les chiffres du box-office des trois premiers films Star Wars. Le premier élément de chaque vecteur indique les recettes du box-office américain, le deuxième élément se réfère au box-office non américain (source : Wikipedia).

Dans cet exercice, vous combinerez tous ces chiffres en un seul vecteur. Ensuite, vous allez construire une matrice à partir de ce vecteur.

`@instructions`
- Utilisez `c(new_hope, empire_strikes, return_jedi)` pour combiner les trois vecteurs en un seul. Appelez ce vecteur `box_office`.
- Construisez une matrice à 3 lignes, où chaque ligne représente un film. Pour ce faire, utilisez la fonction `matrix()`. Le premier argument est le vecteur `box_office`, qui contient tous les chiffres du box-office. Ensuite, vous devrez spécifier `nrow = 3` et `byrow = TRUE`. Nommez la matrice résultante `star_wars_matrix`.

`@hint`
- `box_office <- c(new_hope, empire_strikes, return_jedi)` combinera tous les nombres des différents vecteurs en un seul vecteur à 6 éléments.
- `matrix(box_office, nrow = ..., byrow =  ...)` est un modèle de solution pour la deuxième instruction.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- 

# Construct star_wars_matrix
star_wars_matrix <- 
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
box_office <- c(new_hope, empire_strikes, return_jedi)

# Construct star_wars_matrix
star_wars_matrix <- matrix(box_office, nrow = 3, byrow = TRUE) 
```

`@sct`
```{r}
msg <- "Ne changez rien aux variables de box-office `new_hope`, `empire_strikes` et `return_jedi` !"

ex() %>% check_object("new_hope", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("empire_strikes", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("return_jedi", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("box_office") %>% check_equal(incorrect_msg = "Avez-vous correctement combiné les valeurs de `new_hope`, `empire_strikes` et `return_jedi` dans le vecteur `box_office` ?")

ex() %>% check_function("matrix") %>% {
	check_arg(., 'data') %>% check_equal(incorrect_msg = "Assurez-vous de spécifier correctement les arguments que vous passez à `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'nrow') %>% check_equal(incorrect_msg = "Assurez-vous de spécifier correctement les arguments que vous passez à `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	check_arg(., 'byrow') %>% check_equal(incorrect_msg = "Assurez-vous de spécifier correctement les arguments que vous passez à `matrix()`: `box_office`, `nrow = 3`, `by_row = TRUE`.")
	}

ex() %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = "Avez-vous assigné le résultat de l'appel `matrix()` à `star_wars_matrix` ?")

success_msg("La force est effectivement avec vous ! Continuez à l'exercice suivant.")
```

---

## Nommer une matrice

```yaml
type: NormalExercise
key: f734e8bf74
xp: 100
skills:
  - 1
```

Pour vous aider à vous souvenir de ce qui est stocké dans `star_wars_matrix`, vous aimeriez ajouter les noms des films pour les lignes. Cela vous permet non seulement de lire les données, mais aussi de sélectionner certains éléments de la matrice. 

Comme pour les vecteurs, vous pouvez ajouter des noms pour les lignes et les colonnes d'une matrice

```
rownames(my_matrix) <- row_names_vector
colnames(my_matrix) <- col_names_vector
```

Nous avons préparé deux vecteurs pour vous : `region`, et `titles`. Vous aurez besoin de ces vecteurs pour nommer les colonnes et les lignes de `star_wars_matrix`, respectivement.

`@instructions`
- Utilisez `colnames()` pour nommer les colonnes de `star_wars_matrix` avec le vecteur `region`.
- Utilisez `rownames()` pour nommer les lignes de `star_wars_matrix` avec le vecteur `titles`.
- Affichez `star_wars_matrix` pour voir le résultat de votre travail.

`@hint`
Vous pouvez utiliser `colnames(star_wars_matrix) <- region` pour nommer les colonnes de `star_wars_matrix`. Procédez de la même manière pour nommer les lignes.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region


# Name the rows with titles


# Print out star_wars_matrix
```

`@solution`
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")

# Name the columns with region
colnames(star_wars_matrix) <- region

# Name the rows with titles
rownames(star_wars_matrix) <- titles

# Print out star_wars_matrix
star_wars_matrix
```

`@sct`
```{r}
msg <- "Ne changez rien aux variables de box-office `new_hope`, `empire_strikes` et `return_jedi` !"

ex()  %>% check_object("new_hope", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("empire_strikes", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

ex()  %>% check_object("return_jedi", undefined_msg = msg)  %>% check_equal(incorrect_msg = msg)

msg <- "Ne changez pas le contenu de `star_wars_matrix` ; seulement les noms des lignes et des colonnes !" 

ex()  %>% check_object("star_wars_matrix") %>% check_equal(incorrect_msg = msg)

msg <- "Ne changez rien aux vecteurs `region` et `titles` qui ont été définis pour vous."

ex()  %>% check_object("region", undefined_msg = msg)  %>%  check_equal(incorrect_msg = msg)
ex() %>% check_object("titles", undefined_msg = msg) %>% check_equal( incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix") %>% check_equal(eq_condition = "equal",incorrect_msg = "Avez-vous correctement défini les noms des lignes et des colonnes de `star_wars_matrix` ? Utilisez `colnames(star_wars_matrix) <- region` pour les noms des colonnes ; faites de même pour nommer les lignes.")

ex() %>% check_output_expr("star_wars_matrix", missing_msg = "N'oubliez pas d'imprimer `star_wars_matrix` après avoir nommé les lignes et les colonnes.")

success_msg("Super ! Vous êtes en voie de devenir un jedi R ! Continuez avec l'exercice suivant.")
```

---

## Calcul du box-office mondial

```yaml
type: NormalExercise
key: 3fd7499a12
xp: 100
skills:
  - 1
```

Pour qu'un film devienne instantanément une légende à Tinseltown, le plus important est son chiffre d'affaires au box-office mondial. 

Pour calculer les recettes totales des trois films Star Wars, vous devez faire la somme de la colonne des recettes américaines et de la colonne des recettes non américaines. 

Dans R, la fonction `rowSums()` permet de calculer les totaux pour chaque ligne d'une matrice. Cette fonction crée un nouveau vecteur :

```
rowSums(my_matrix)
```

`@instructions`
Calculez les recettes mondiales des trois films et placez-les dans le vecteur nommé `worldwide_vector`.

`@hint`
`rowSums(star_wars_matrix)` calculera la somme de chaque ligne, c'est-à-dire le total des recettes pour chaque film.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
                 "The Empire Strikes Back", 
                 "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# Calculate worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)
```

`@sct`
```{r}
msg <- "Ne changez rien aux variables prédéfinies `box_office_all` et `star_wars_marix` !"

ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Appelez `rowSums()` sur `star_wars_matrix` et stockez le résultat dans `worldwide_vector`.")

success_msg("Bien joué ! Continuez à l'exercice suivant.")
```

---

## Ajout d'une colonne pour le box-office mondial

```yaml
type: NormalExercise
key: 86b87a8545
xp: 100
skills:
  - 1
```

Dans l'exercice précédent, vous avez calculé le vecteur contenant les recettes mondiales de chacun des trois films Star Wars. Cependant, ce vecteur ne fait pas encore partie de `star_wars_matrix`.

Vous pouvez ajouter une ou plusieurs colonnes à une matrice à l'aide de la fonction `cbind()`, qui fusionne les matrices et/ou les vecteurs par colonne. Par exemple : 

```
big_matrix <- cbind(matrix1, matrix2, vector1 ...)
```

`@instructions`
Ajoutez `worldwide_vector` comme nouvelle colonne à `star_wars_matrix` et affectez le résultat à `all_wars_matrix`. Utilisez la fonction `cbind()`.

`@hint`
Dans cet exercice, vous devez passer deux variables à `cbind()` : `star_wars_matrix` et `worldwide_vector`, dans cet ordre. Affectez le résultat à `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# no pec
```

`@sample_code`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# Construct star_wars_matrix
box_office <- c(460.998, 314.4, 290.475, 247.900, 309.306, 165.8)
region <- c("US", "non-US")
titles <- c("A New Hope", 
            "The Empire Strikes Back", 
            "Return of the Jedi")
               
star_wars_matrix <- matrix(box_office, 
                      nrow = 3, byrow = TRUE,
                      dimnames = list(titles, region))

# The worldwide box office figures
worldwide_vector <- rowSums(star_wars_matrix)

# Bind the new variable worldwide_vector as a column to star_wars_matrix
all_wars_matrix <- cbind(star_wars_matrix, worldwide_vector)
```

`@sct`
```{r}
msg <- "Ne changez rien aux variables prédéfinies `box_office_all` et `star_wars_marix` !"
ex() %>% check_object("box_office", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix", undefined_msg = msg) %>% check_equal(, incorrect_msg = msg)

ex() %>% check_object("worldwide_vector") %>% check_equal(incorrect_msg = "Stockez le résultat de `rowSums(star_wars_matrix)` dans `worldwide_vector`.")

msg <- "Avez-vous correctement utilisé `cbind()` pour ajouter `worldwide_vector` à `star_wars_matrix` ? Vous devez passer `star_wars_matrix` et `world_wide_vector` à `cbind()`, dans cet ordre. La matrice résultante, `all_wars_matrix`, doit comporter trois lignes et trois colonnes."
ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = msg)

success_msg("Beau travail ! Après avoir ajouté une colonne à une matrice, l'étape logique suivante est d'ajouter des lignes. Apprenez comment dans le prochain exercice.")
```

---

## Ajout d’une ligne

```yaml
type: NormalExercise
key: bcadb29139
xp: 100
skills:
  - 1
```

Tout comme chaque action a une réaction, chaque `cbind()` a une `rbind()`. (Nous admettons que nous sommes assez mauvais en matière de métaphores). 

Votre espace de travail R, où toutes les variables que vous avez définies « vivent » [(voir ce qu'est un espace de travail](http://www.statmethods.net/interface/workspace.html)), a déjà été initialisé et contient deux matrices :

- `star_wars_matrix` que nous utilisons depuis le début, avec des données sur la trilogie originale,
- `star_wars_matrix2` avec des données similaires pour la trilogie prequel. 

Explorez ces matrices dans la console si vous souhaitez les examiner de plus près. Si vous souhaitez vérifier le contenu de l'espace de travail, vous pouvez taper `ls()` dans la console.

`@instructions`
Utilisez `rbind()` pour coller `star_wars_matrix` et `star_wars_matrix2`, dans cet ordre. Affectez la matrice résultante à `all_wars_matrix`.

`@hint`
Reliez les deux matrices comme suit :
```
rbind(matrix1, matrix2)
```
Affectez le résultat à `all_wars_matrix`.

`@pre_exercise_code`
```{r}
# Construct matrix
box_office_all <- c(461, 314.4, 290.5, 247.9, 309.3, 165.8)
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi")
col_titles <- c("US","non-US")
star_wars_matrix <- matrix(box_office_all, nrow = 3, byrow = TRUE, dimnames = list(movie_names, col_titles))

# Construct matrix2
box_office_all2 <- c(474.5, 552.5, 310.7, 338.7, 380.3, 468.5)
movie_names2 <- c("The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
star_wars_matrix2 <- matrix(box_office_all2, nrow=3, byrow = TRUE, dimnames = list(movie_names2, col_titles))

# remove all except all_wars_matrix
rm(box_office_all)
rm(movie_names)
rm(col_titles)
rm(box_office_all2)
rm(movie_names2)
```

`@sample_code`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- 
```

`@solution`
```{r}
# star_wars_matrix and star_wars_matrix2 are available in your workspace
star_wars_matrix  
star_wars_matrix2 

# Combine both Star Wars trilogies in one matrix
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2)
```

`@sct`
```{r}
msg = "Ne remplacez pas les variables qui ont été définies pour vous dans l'espace de travail (`star_wars_matrix` et `star_wars_matrix2`)."
ex() %>% check_object("star_wars_matrix",  undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("star_wars_matrix2", undefined_msg = msg) %>% check_equal(eq_condition = "equal",incorrect_msg = msg)

ex() %>% check_object("all_wars_matrix") %>% check_equal(incorrect_msg = "Avez-vous utilisé correctement `rbind()` pour créer `all_wars_matrix()` ? `rbind()` doit prendre deux arguments : `star_wars_matrix` et `star_wars_matrix2`, dans cet ordre.")

success_msg("Magnifique ! Continuez avec l'exercice suivant et voyez comment vous pouvez combiner les résultats de la fonction `rbind()` avec la fonction `colSums()` !")
```

---

## Le total des recettes au box-office pour l'ensemble de la saga

```yaml
type: NormalExercise
key: 1bfe5ae096
xp: 100
skills:
  - 1
```

Comme chaque `cbind()` a sa `rbind()`, chaque `colSums()` a sa `rowSums()`. Votre espace de travail R contient déjà la matrice `all_wars_matrix` que vous avez construit dans l'exercice précédent ; tapez `all_wars_matrix` pour y jeter un autre coup d'œil. Calculons maintenant les recettes totales au box-office pour l'ensemble de la saga.

`@instructions`
- Calculez le revenu total pour les États-Unis et la région hors États-Unis et attribuez `total_revenue_vector`. Vous pouvez utiliser la fonction `colSums()`.
- Affichez `total_revenue_vector` pour voir les résultats.

`@hint`
Vous devez utiliser la fonction `colSums()` avec `star_wars_matrix` comme argument pour trouver le total des recettes par région.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- 
  
# Print out total_revenue_vector
```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Total revenue for US and non-US
total_revenue_vector <- colSums(all_wars_matrix)

# Print out total_revenue_vector
total_revenue_vector
```

`@sct`
```{r}
msg = "Ne modifiez pas le contenu de `all_wars_matrix`; il a été créé pour vous dans l'espace de travail."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(eq_condition = "equal", incorrect_msg = msg)

ex() %>% check_function("colSums") %>% check_arg('x') %>% check_equal(incorrect_msg = "Avez-vous utilisé la fonction `colSums()` sur le all_wars_matrix?")

ex() %>% check_object("total_revenue_vector") %>% check_equal(incorrect_msg = "Avez-vous correctement assigné le résultat de `colSums(all_wars_matrix)` à `total_revenue_vector`?")

ex() %>% check_output_expr("total_revenue_vector", missing_msg = "N'oubliez pas d'imprimer `total_revenue_vector`!")

success_msg("Bellissimo! Passez à l'exercice suivant pour apprendre le sous-ensemble de matrices.")
```

---

## Sélection des éléments de la matrice

```yaml
type: NormalExercise
key: 41d9d69713
xp: 100
skills:
  - 1
```

Comme pour les vecteurs, vous pouvez utiliser les crochets `[ ]` pour sélectionner un ou plusieurs éléments d'une matrice. Alors que les vecteurs ont une dimension, les matrices en ont deux. Vous devez donc utiliser une virgule pour séparer les lignes que vous souhaitez sélectionner des colonnes. Par exemple : 

- `my_matrix[1,2]` sélectionne l'élément situé sur la première ligne et dans la deuxième colonne.
- `my_matrix[1:3,2:4]` donne une matrice avec les données sur les lignes 1, 2, 3 et dans les colonnes 2, 3, 4.

Si vous souhaitez sélectionner tous les éléments d'une ligne ou d'une colonne, aucun nombre n'est nécessaire avant ou après la virgule, respectivement :

- `my_matrix[,1]` sélectionne tous les éléments de la première colonne.
- `my_matrix[1,]` sélectionne tous les éléments de la première ligne.

Retournez à la Guerre des Étoiles avec ces connaissances nouvellement acquises ! Comme dans l'exercice précédent, `all_wars_matrix` est déjà disponible dans votre espace de travail.

`@instructions`
- Sélectionnez les recettes non américaines pour tous les films (l'intégralité de la deuxième colonne de `all_wars_matrix`) et enregistrez le résultat sous `non_us_all`.
- Utilisez `mean()` sur `non_us_all` pour calculer la moyenne des recettes non américaines pour tous les films. Il suffit d'afficher le résultat.
- Cette fois, sélectionnez les recettes non américaines des deux premiers films sur `all_wars_matrix`. Enregistrez le résultat en tant que `non_us_some`.
- Utilisez à nouveau `mean()` pour afficher la moyenne des valeurs de `non_us_some`.

`@hint`
Vous pouvez sélectionner toute la deuxième colonne d'une matrice `my_matrix` avec `my_matrix[,2]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- 
  
# Average non-US revenue

  
# Select the non-US revenue for first two movies
non_us_some <- 
  
# Average non-US revenue for first two movies

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Select the non-US revenue for all movies
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue
mean(non_us_all)
  
# Select the non-US revenue for first two movies
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies
mean(non_us_some)
```

`@sct`
```{r}
msg = "Ne modifiez pas le contenu de `all_wars_matrix`; cette matrice a déjà été créée pour vous dans l'espace de travail."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("non_us_all") %>% check_equal(incorrect_msg = "Avez-vous assigné à `non_us_all` l'ensemble de la deuxième colonne de `all_wars_matrix` ? Vous pouvez utiliser `[, 2]` pour le faire !")

ex() %>% check_output_expr("mean(non_us_all)", missing_msg = "Avez-vous calculé la moyenne des valeurs dans `non_us_all` en appelant `mean(non_us_all)` ? Imprimez simplement le résultat.")

ex() %>% check_object("non_us_some") %>% check_equal(incorrect_msg = "Avez-vous assigné à `non_us_some` les revenus non-US pour les deux premiers films ? Vous pouvez utiliser `[1:2,2]` pour le faire !")

ex() %>% check_output_expr("mean(non_us_some)", missing_msg = "Avez-vous calculé la moyenne des valeurs dans `non_us_some` en appelant `mean(non_us_some)` ? Imprimez simplement le résultat.")

success_msg("Bien joué ! Continuez à l'exercice suivant.")
```

---

## Un peu d'arithmétique avec les matrices

```yaml
type: NormalExercise
key: c81c656f06
xp: 100
skills:
  - 1
```

Comme pour les vecteurs, les opérateurs standard tels que `+`, `-`, `/`, `*`, etc. fonctionnent de manière élémentaire sur les matrices dans R. 

Par exemple, `2 * my_matrix` multiplie chaque élément de `my_matrix` par deux.

En tant qu'analyste de données nouvellement embauché par Lucasfilm, vous êtes chargé de déterminer le nombre de visiteurs de chaque film pour chaque zone géographique. Vous disposez déjà des chiffres des recettes totales dans la matrice `all_wars_matrix`. Supposons que le prix d'un billet soit de 5 dollars. Il suffit de diviser les chiffres de la billetterie par le prix du billet pour obtenir le nombre de visiteurs.

`@instructions`
- Divisez `all_wars_matrix` par 5, ce qui vous donne le nombre de visiteurs en millions. Affectez la matrice résultante à `visitors`.
- Affichez `visitors` pour y jeter un coup d'œil.

`@hint`
Le nombre de visiteurs est égal à `all_wars_matrix` divisé par 5.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
```

`@sample_code`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- 
  
# Print the estimate to the console

```

`@solution`
```{r}
# all_wars_matrix is available in your workspace
all_wars_matrix

# Estimate the visitors
visitors <- all_wars_matrix / 5

# Print the estimate to the console
visitors
```

`@sct`
```{r}
msg = "Ne modifiez pas le contenu de `all_wars_matrix` ; cette matrice a déjà été créée pour vous dans l'espace de travail."

ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Il semble que `visitors` n'est pas correct. Divisez simplement `all_wars_matrix` par 5 et stockez la matrice résultante sous le nom `visitors`.")

ex() %>% check_output_expr("visitors", missing_msg = "N'oubliez pas d'imprimer également `visitors` pour que vous puissiez y jeter un coup d'œil.")

success_msg("Super ! Que vous disent ces résultats ? Un nombre impressionnant de 92 millions de personnes sont allées voir A New Hope dans les cinémas américains ! Continuez à l'exercice suivant.")
```

---

## Un peu d'arithmétique avec les matrices (2)

```yaml
type: NormalExercise
key: 1e0b39d6e9
xp: 100
skills:
  - 1
```

Tout comme `2 * my_matrix` a multiplié chaque élément de `my_matrix` par deux, `my_matrix1 * my_matrix2` crée une matrice dont chaque élément est le produit des éléments correspondants de `my_matrix1` et `my_matrix2`. 

Après avoir examiné le résultat de l'exercice précédent, Lucas, le grand patron, fait remarquer que le prix des billets a augmenté au fil du temps. Il demande de refaire l'analyse sur la base des prix que vous pouvez trouver dans `ticket_prices_matrix` (source : imagination).

_Les personnes familiarisées avec les matrices noteront qu'il ne s'agit pas de la multiplication matricielle standard pour laquelle vous devez utiliser `%*%` dans R._

`@instructions`
- Divisez `all_wars_matrix` par `ticket_prices_matrix` pour obtenir le nombre estimé de visiteurs américains et non américains pour les six films. Affectez le résultat à `visitors`.
- Dans la matrice `visitors`, sélectionnez toute la première colonne, qui représente le nombre de visiteurs aux États-Unis. Enregistrez cette sélection dans `us_visitors`.
- Calculez le nombre moyen de visiteurs américains ; imprimez le résultat.

`@hint`
- Vous pouvez utiliser la fonction `mean()` pour calculer la moyenne des entrées de la fonction.
- Pour obtenir le nombre de visiteurs aux États-Unis, sélectionnez la première colonne de `visitors` en utilisant `visitors[ ,1]`.

`@pre_exercise_code`
```{r}
load(url("https://assets.datacamp.com/course/intro_to_r/all_wars_matrix.RData"))
movie_names <- c("A New Hope","The Empire Strikes Back","Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith")
col_titles <- c("US","non-US")
ticket_prices_matrix <- matrix(c(5, 5, 6, 6, 7, 7, 4, 4, 4.5, 4.5, 4.9, 4.9), nrow = 6, byrow = TRUE, dimnames = list(movie_names,col_titles))
```

`@sample_code`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- 

# US visitors
us_visitors <- 

# Average number of US visitors

```

`@solution`
```{r}
# all_wars_matrix and ticket_prices_matrix are available in your workspace
all_wars_matrix
ticket_prices_matrix

# Estimated number of visitors
visitors <- all_wars_matrix / ticket_prices_matrix

# US visitors
us_visitors <- visitors[ ,1]

# Average number of US visitors
mean(us_visitors)
```

`@sct`
```{r}
msg <- "Ne modifiez pas le contenu de `all_wars_matrix` ; cette matrice a déjà été créée pour vous dans l'espace de travail."
ex() %>% check_object("all_wars_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("ticket_prices_matrix", undefined_msg = msg) %>% check_equal(incorrect_msg = msg)

ex() %>% check_object("visitors") %>% check_equal(incorrect_msg = "Avez-vous correctement créé la matrice `visitors` ? Vous devriez diviser `all_wars_matrix` par `ticket_prices_matrix` pour y parvenir.")

ex() %>% check_object("us_visitors") %>% check_equal(incorrect_msg = "Pour créer `us_visitors`, vous devriez correctement sélectionner l\'ensemble de la première colonne de `visitors`. Vous pouvez utiliser `[,1]` pour cela !")

ex() %>% check_output_expr("mean(us_visitors)", missing_msg = "Une fois que vous avez créé `us_visitors`, vous pouvez utiliser `mean()` pour calculer le nombre moyen de visiteurs aux États-Unis. Assurez-vous d\'imprimer le résultat.")

success_msg("C'est un fait : la force R est avec vous ! Cet exercice conclut le chapitre sur les matrices. Prochaine étape de votre voyage à travers le langage R : les facteurs.")
```
